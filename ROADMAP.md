# palank-rag Roadmap

> 로컬 하이브리드 RAG 시스템 발전 계획

---

## 현재 상태 (v0.1.0)

| 영역 | 구현 상태 | 품질 |
|------|----------|------|
| 임베딩 | Gemini API (text-embedding-004) | ⭐⭐⭐ |
| 벡터 검색 | LanceDB | ⭐⭐⭐ |
| 키워드 검색 | SQLite FTS5 | ⭐⭐⭐ |
| 하이브리드 | RRF (Reciprocal Rank Fusion) | ⭐⭐⭐ |
| 스크래퍼 | 기본 HTML 추출 | ⭐⭐ |
| 청킹 | 마크다운 기반 규칙 | ⭐⭐ |

---

## Phase 1: 핵심 기능 (v0.2.0)

> 실사용에 필수적인 기능

### 1.1 로컬 파일/폴더 수집
- [ ] 단일 파일 수집 (`--file`)
- [ ] 폴더 일괄 수집 (`--dir`)
- [ ] 지원 포맷: `.md`, `.txt`, `.rs`, `.ts`, `.py`, `.json`
- [ ] `.gitignore` 패턴 존중
- [ ] 증분 업데이트 (변경된 파일만)

### 1.2 Rate Limiting
- [ ] 임베딩 API 호출 제한 (1초 딜레이)
- [ ] 429 응답 시 지수 백오프
- [ ] 배치 처리 최적화

### 1.3 설정 파일
- [ ] `~/.palank-rag/config.toml` 지원
- [ ] 설정 항목:
  ```toml
  [embedding]
  provider = "gemini"
  model = "text-embedding-004"
  dimension = 768

  [search]
  default_limit = 5
  hybrid_weight = 0.5  # vector vs keyword

  [storage]
  data_dir = "~/.palank-rag"
  ```

### 1.4 중복 제거
- [ ] URL 기반 중복 감지
- [ ] 콘텐츠 해시 기반 중복 감지
- [ ] `--force` 옵션으로 덮어쓰기

---

## Phase 2: 품질 향상 (v0.3.0)

> 검색 및 수집 품질 개선

### 2.1 시맨틱 청킹
- [ ] Gemma 3-27b-it 기반 청킹
- [ ] 의미 단위 분할
- [ ] 메타데이터 자동 추출 (주제, 엔티티)
- [ ] 규칙 기반 폴백

### 2.2 검색 리랭킹
- [ ] LLM 기반 리랭킹 (선택적)
- [ ] 쿼리-문서 관련성 재평가
- [ ] Top-K 결과 재정렬

### 2.3 쿼리 확장
- [ ] 동의어 자동 추가
- [ ] 약어 확장
- [ ] LLM 기반 쿼리 재작성 (선택적)

### 2.4 출력 포맷
- [ ] `--format json` 옵션
- [ ] `--format markdown` 옵션
- [ ] stdin/stdout 파이프라인 지원

### 2.5 콘텐츠 분류
- [ ] 자동 분류: tutorial, api, concept, example
- [ ] 분류별 필터링 검색
- [ ] 신뢰도 점수

---

## Phase 3: 확장 (v0.4.0)

> 추가 소스 및 기능

### 3.1 PDF 지원
- [ ] PDF 텍스트 추출
- [ ] 페이지별 청킹
- [ ] 이미지/표 처리 (선택적)

### 3.2 GitHub 저장소 수집
- [ ] `palank-rag ingest --github owner/repo`
- [ ] README, 문서 폴더 자동 감지
- [ ] 코드 파일 선택적 수집

### 3.3 고급 필터링
- [ ] 날짜 범위 필터
- [ ] 소스 타입 필터
- [ ] 신뢰도 필터
- [ ] 다중 태그 지원

### 3.4 컨텍스트 윈도우
- [ ] 인접 청크 포함 옵션
- [ ] `--context-before 1 --context-after 1`
- [ ] 문서 전체 반환 옵션

---

## Phase 4: 사용성 (v0.5.0)

> 사용자 경험 개선

### 4.1 대화형 모드
- [ ] `palank-rag interactive`
- [ ] 연속 검색
- [ ] 히스토리 지원

### 4.2 진행률 표시
- [ ] 수집 진행률 바
- [ ] 임베딩 진행률
- [ ] 예상 시간 표시

### 4.3 통계 및 분석
- [ ] `palank-rag stats`
- [ ] 문서 수, 청크 수, 저장 용량
- [ ] 프레임워크별 분포
- [ ] 검색 히스토리

### 4.4 내보내기/가져오기
- [ ] `palank-rag export --format json`
- [ ] `palank-rag import backup.json`
- [ ] 선택적 내보내기 (프레임워크별)

---

## Phase 5: 신뢰성 (v0.6.0)

> 안정성 및 유지보수

### 5.1 자동 백업
- [ ] 주기적 DB 백업
- [ ] 백업 보존 정책 (최근 N개)
- [ ] 복원 명령어

### 5.2 스키마 마이그레이션
- [ ] 버전별 마이그레이션 스크립트
- [ ] 자동 마이그레이션
- [ ] 롤백 지원

### 5.3 에러 복구
- [ ] 네트워크 에러 자동 재시도
- [ ] 부분 실패 시 재개
- [ ] 손상된 인덱스 복구

### 5.4 로깅 개선
- [ ] 구조화된 로그 (JSON)
- [ ] 로그 레벨 설정
- [ ] 로그 파일 로테이션

---

## 미래 고려사항

> 장기적으로 검토할 기능

- [ ] 멀티 테넌트 (프로젝트별 분리)
- [ ] 원격 저장소 지원 (S3, GCS)
- [ ] 웹 UI 대시보드
- [ ] VSCode 확장
- [ ] Obsidian 플러그인
- [ ] Notion 연동
- [ ] 로컬 임베딩 (Ollama)
- [ ] 크로스플랫폼 (macOS, Linux)

---

## 버전 릴리즈 계획

| 버전 | 목표 | 주요 기능 |
|------|------|----------|
| v0.1.0 | 초기 릴리즈 | 기본 RAG 기능 |
| v0.2.0 | 핵심 기능 | 파일/폴더 수집, 설정, Rate Limit |
| v0.3.0 | 품질 향상 | 시맨틱 청킹, 리랭킹, JSON 출력 |
| v0.4.0 | 확장 | PDF, GitHub, 고급 필터 |
| v0.5.0 | 사용성 | 대화형 모드, 통계, 내보내기 |
| v0.6.0 | 신뢰성 | 백업, 마이그레이션, 복구 |

---

## 기여 가이드

PR 환영합니다! 특히 다음 영역:
- 크로스플랫폼 지원 (macOS, Linux 빌드)
- 추가 파일 포맷 지원
- 성능 최적화
- 문서화

---

*Last Updated: 2026-01-30*
